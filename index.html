<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Hybrid AR Business Card</title>

		<!-- MindAR -->
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js"></script>

		<!-- Google Model Viewer -->
		<script
			type="module"
			src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
		></script>

		<style>
			html,
			body {
				margin: 0;
				overflow: hidden;
				height: 100%;
			}
			#container {
				width: 100%;
				height: 100%;
				position: relative;
				background: black;
			}

			/* Overlay model-viewer */
			#model-viewer {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				display: none;
				pointer-events: none;
				background: transparent;
				transition: opacity 0.3s ease;
				opacity: 0;
			}
			#model-viewer.show {
				display: block;
				opacity: 1;
			}

			/* Simple overlay info */
			#info {
				position: absolute;
				bottom: 10px;
				left: 50%;
				transform: translateX(-50%);
				background: rgba(0, 0, 0, 0.6);
				color: white;
				padding: 6px 12px;
				border-radius: 8px;
				font-family: sans-serif;
				z-index: 10;
			}
		</style>
	</head>

	<body>
		<div id="container"></div>

		<!-- High quality model viewer -->
		<model-viewer
			id="model-viewer"
			src="https://abusaeed-shuvo.github.io/mvcard/models/model.glb"
			alt="AR Business Card"
			camera-controls
			auto-rotate
			ar
			ar-modes="webxr scene-viewer quick-look"
		></model-viewer>

		<div id="info">Point your camera at the marker</div>

		<script type="module">
			import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js";

			async function startAR() {
				const mindarThree = new window.MINDAR.IMAGE.MindARThree({
					container: document.querySelector("#container"),
					imageTargetSrc:
						"https://abusaeed-shuvo.github.io/mvcard/targets/targets.mind",
				});

				const { renderer, scene, camera } = mindarThree;
				const anchor = mindarThree.addAnchor(0);
				const modelViewer = document.getElementById("model-viewer");
				const info = document.getElementById("info");

				anchor.onTargetFound = () => {
					modelViewer.classList.add("show");
					info.textContent = "Marker found âœ…";
				};

				anchor.onTargetLost = () => {
					modelViewer.classList.remove("show");
					info.textContent = "Point your camera at the marker";
				};

				await mindarThree.start();
				renderer.setAnimationLoop(() => {
					renderer.render(scene, camera);
				});
			}

			startAR();
		</script>
	</body>
</html>
